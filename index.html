<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Huffman Studio Pro</title>
    <style>
        :root { --primary: #2563eb; --success: #16a34a; --bg: #f8fafc; }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .container { background: white; width: 450px; padding: 2rem; border-radius: 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        .tabs { display: flex; background: #f1f5f9; padding: 4px; border-radius: 12px; margin-bottom: 2rem; }
        .tab { flex: 1; padding: 10px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; color: #64748b; background: transparent; }
        .tab.active { background: white; color: var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .tab.active.decomp { color: var(--success); }
        .drop-zone { border: 2px dashed #e2e8f0; border-radius: 16px; padding: 40px 20px; text-align: center; cursor: pointer; margin-bottom: 1.5rem; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; color: white; transition: 0.2s; }
        .btn-comp { background: var(--primary); }
        .btn-decomp { background: var(--success); }
        .btn:disabled { background: #cbd5e1; cursor: not-allowed; }
        #status-pill { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; background: #e2e8f0; margin-top: 1.5rem; }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <button class="tab active" id="tabComp" onclick="switchMode('comp')">Compress</button>
        <button class="tab" id="tabDecomp" onclick="switchMode('decomp')">Decompress</button>
    </div>

    <div class="drop-zone" id="dropZone" onclick="document.getElementById('fileInput').click()">
        <span id="dropText">Click to select <b>.txt</b></span>
        <input type="file" id="fileInput" hidden>
    </div>

    <button id="mainBtn" class="btn btn-comp" disabled>Compress...</button>
    <center><div id="status-pill">Waiting for WASM...</div></center>
</div>

<script>
    // Module config must be global before loading huffman.js
    var Module = {
        onRuntimeInitialized: function() {
            const statusPill = document.getElementById('status-pill');
            if (statusPill) statusPill.innerText = "Engine Ready";
            if (typeof startApp === "function") startApp();
        }
    };
</script>
<script src="huffman.js"></script>
<script src="app.js"></script>
</body>
</html>